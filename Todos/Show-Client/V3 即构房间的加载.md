## 即构的流程

设置用户信息以及登录 token，并将其 dispatch 到全局状态中，随后再调用即构的设置房间状态的方法，会将用于登录到即构的 token 更新到全局状态。

```ts
dispatch(
  updateRoom({
    userName: '游客',
    character: 'jueseA_Ani',
  })
);
await getZegoAppID();
await getRoomState(boothID, whatToken);
```

在即构中，房间状态的 token 的更新会直接触发重新登录房间。

```ts
// 根据zege slice 状态自动登录
useEffect(() => {
  loginRoom();
  // eslint-disable-next-line react-hooks/exhaustive-deps
}, [roomState.roomID, roomState.token]);
```

即构成功登录到房间后，其他用户进入以及离开房间都会通过即构的消息 `roomUserUpdate` 获得通知。

### 对方进入房间后