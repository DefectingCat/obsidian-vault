# è§¦æ‘¸æ»šåŠ¨

`touchstart` æ—¶çš„ `pageX` å°±æ˜¯è§¦æ‘¸æ—¶çš„åæ ‡ä½ç½®ã€‚åˆ©ç”¨ `touchmove` æ—¶çš„ `pageX` å‡å» `touchstart` æ—¶çš„ `pageX` å°±æ˜¯æ»‘åŠ¨çš„è·ç¦»ã€‚

å°†æ»‘åŠ¨çš„è·ç¦»èµ‹å€¼ç»™éœ€è¦æ»šåŠ¨çš„å…ƒç´ ï¼Œæ—¢å¯å®ç°è§¦æ‘¸æ»šåŠ¨ã€‚

```tsx
import { useRef } from 'react';
import Scrollbars from 'react-custom-scrollbars-2';

/**
 * å¼ºåˆ¶æ¨ªå±æ—¶å¤„ç†çºµå‘æ»šåŠ¨
 * @returns
 */
const useTouchScroll = () => {
  const startX = useRef(0);
  const startY = useRef(0);
  const scrollRef = useRef<Scrollbars>(null);

  const touchStart: React.TouchEventHandler<HTMLDivElement> = (e) => {
    startX.current = e.touches[0].pageX;
    startY.current = e.touches[0].pageY;
  };
  const handleTouch: React.TouchEventHandler<HTMLDivElement> = (e) => {
    const endX = e.changedTouches[0].pageX;
    const endY = e.changedTouches[0].pageY;
    const x = endX - startX.current;
    const y = endY - startY.current;

    // å‘å³æ»‘åŠ¨ï¼Œå³å‘ä¸‹æ»‘åŠ¨
    if (Math.abs(x) > Math.abs(y) && x > 0) {
      if (scrollRef.current?.container.firstElementChild?.scrollTop == null)
        return;
      scrollRef.current.container.firstElementChild.scrollTop += x / 10;
    }
    // å‘å·¦æ»‘åŠ¨ï¼Œå³å‘ä¸Šæ»‘åŠ¨
    if (Math.abs(x) > Math.abs(y) && x < 0) {
      if (scrollRef.current?.container.firstElementChild?.scrollTop == null)
        return;
      scrollRef.current.container.firstElementChild.scrollTop += x / 10;
    }
  };

  return {
    scrollRef,
    touchStart,
    handleTouch,
  };
};

export default useTouchScroll;
```

<aside>
ğŸ’¡ åœ¨ `touchend` äº‹ä»¶çš„æ—¶ï¼Œ`targetTouches`ã€`touches` å¯¹è±¡æ˜¯ä¸èƒ½è¿”å›ç¦»å¼€å±å¹•æ—¶çš„æ‰‹æŒ‡ä¿¡æ¯ï¼Œåªæœ‰ `changedTouches` å¯¹è±¡èƒ½è¿”å›ã€‚

</aside>