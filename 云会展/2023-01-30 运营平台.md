## 界面

### 基础设置

![[Pasted image 20230130142143.png]]

原有展台设置可以迁移到【基础】设置中，当前工程在【上架/公开】后即为直接访问的展台。原有的针对展台的设置以及一些全局设置都可以放在【基础】设置中。

### 功能模块

对于展台的功能设置，可以考虑按功能拆分模块按钮。在进入到对应的功能设置后，在右侧再显示该功能的详细设置。

![[Pasted image 20230130143427.png]]

![[Pasted image 20230130143608.png]]

### 界面层级

界面布局比较重要的一个部分就是设置的层级深度。层级越深，找到一个设置就越麻烦。

![[Pasted image 20230130151120.png]]

以前对于展台的设置，需要至少三个层级才能进行设置。对于一些常用的设置可以考虑放在一级菜单页面上。

![[Pasted image 20230130151343.png]]

由于我们的热点等功能设置比较多，如果全部都放在第一层级会比较多，对于详细的设置可以考虑放在单独的设置中。

![[Pasted image 20230130154255.png]]

对于整个界面的设计，主要方面应该以易用为主，当前编辑器在第一次界面重构之前也有用户反馈过界面比较复杂。主要功能设置按钮可以考虑多放在一级界面，一些详细的设置再做到单独的层级内。这样用户寻找一个主要功能设置时不用翻太深的层级，也不会因为一个功能内设置太多而看不懂。

### 界面布局

对于已有的展台设置都迁移到现在的工程设置中，可以考虑放在【基础】设置中，并将常用的设置都放在一级层级中。例如展台的基本设置，功能的开关等。

![[Pasted image 20230130142513.png]]

## 性能优化

对于性能方面，同一个场景内随着功能的添加可能会越来越复杂。在编辑器中，可以考虑针对当前设置功能的渲染/预览。

例如当前场景的热点添加的比较多时，此时再切换到【视角】功能区设置视角可以不渲染热点。当用户需要预览整个工程时，再通过专门的预览模块去预览整个效果。

> 对于嵌入到场景/模型中的内容可以考虑一直都显示。目前热点图标的渲染方式是利用 DOM 在浏览器中渲染，旋转视角时是直接操作所有热点 DOM 改变位置，而浏览器 DOM 非常的笨重，这是导致性能降低的一个很重要的因素。

![[Pasted image 20230130144205.png]]

![[Pasted image 20230130144300.png]]

### 不同设置的懒加载

当功能按模块区分后，不同设置可以做成页面路由而非组件。这样就可以再配合路由的懒加载与代码分割。

例如使用路由后，从【视角】设置 `edit/view` 切换到【热点】设置 `edit/hotspot` 为路由的切换，子路由只展示模型 `Canvas`，这样也能更好的配合显示不同的设置功能。

## 其他方面

### 解耦合

页面（编辑器、工程展示等）与 three.js 的渲染引擎（Show Library 项目）的解耦合。

对于当前的前端页面需要由状态驱动，一个工程的全局状态可能如下。

```js
{
	view: { ... },
	spots: { ... },
	embeds: { ... },
}
```

但全局状态只是为了驱动当前的页面渲染，对于我们的 three.js 渲染组件，完全不需要知道全局状态的存在，可以完全解耦合。当设置对应功能时可以通过事件或暴漏出对应的设置方法等：

```js
GlobalEvent.dispatch('change_view', payloadView);
```
