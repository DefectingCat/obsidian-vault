## 加密在视频流上的应用

视频可以通过 `MediaSource()` 来创建一个 source，并通过 `URL.createObjectURL()` 来创建一个指向该 source 的

```tsx
useEffect(() => {
  (async () => {
    const result = await decrypt_from_url(VIDEO_PATH);
    if (!ref.current) return;
    const video = ref.current;

    const source = new MediaSource();
    video.src = URL.createObjectURL(source);
    source.addEventListener("sourceopen", (e) => {
      const target = e.target as MediaSource;
      const sourceBuffer = target.addSourceBuffer(mimeCodec);
      sourceBuffer.addEventListener("updateend", () => {
        target.endOfStream();
      });
      sourceBuffer.appendBuffer(result);
    });
  })();
}, []);
```