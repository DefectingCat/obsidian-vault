## 期约

### 期约的状态

Promise 有三个状态：

* 待定（pending） 
* 兑现（fulfilled，有时候也称为“解决”，resolved）
* 拒绝（rejected）

默认处于 peding 装，状态一旦落定则是不可改变的。同时，也不能保证 Promise 或脱离 pending 状态。

Promise 在被创建时就会立即执行传入的参数函数。当去落定了一个 Promise 的状态后，并尝试 `await` 它，Promise 便会将其异步操作添加到当前任务队列后的微任务中。也就是下个宏任务之前。

如果不落定状态就去尝试 `await` 一个 Promise 的话，可能导致后续宏任务（包括当前任务队列）无法执行。

```js
const p1 = new Promise((resolve, reject) => {
  setTimeout(() => {
    console.log(1);
  }, 200);
});
const p2 = new Promise((resolve, reject) => {
  setTimeout(() => {
    console.log(2);
  }, 200);
});
await p1;
await p2;
setTimeout(console.log, 100, "3");
console.log(4);
```
