# æ•°æ®ç±»å‹

åŸå§‹ç±»å‹ï¼šUndefinedã€Nullã€Booleanã€Numberã€String å’Œ Symbolã€‚Symbolï¼ˆç¬¦å·ï¼‰

å¼•ç”¨å€¼ï¼šObject

<aside>
ğŸ’¡ ç‰¹æ®Šå€¼ null è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå¯¹ç©ºå¯¹è±¡çš„å¼•ç”¨ã€‚

</aside>

## Undefined ç±»å‹

Undefined ç±»å‹åªæœ‰ä¸€ä¸ªå€¼ï¼Œå°±æ˜¯ç‰¹æ®Šå€¼ Undefinedã€‚å½“ä½¿ç”¨ let æˆ– var å£°æ˜äº†å˜é‡ä½†æ²¡æœ‰èµ‹å€¼åˆå§‹åŒ–æ—¶ï¼Œå°±ç›¸å½“äºç»™å˜é‡èµ‹å€¼äº† undefined å€¼ã€‚

<aside>
ğŸ’¡ ä¸€èˆ¬æ¥è¯´ï¼Œæ°¸è¿œä¸ç”¨æ˜¾ç¤ºçš„ç»™æŸä¸ªå˜é‡è®¾ç½® undefined å€¼ã€‚å¢åŠ è¿™ä¸ªç‰¹æ®Šå€¼çš„ç›®çš„å°±æ˜¯ä¸ºäº†æ­£å¼æ˜ç¡®ç©ºå¯¹è±¡æŒ‡é’ˆï¼ˆnullï¼‰å’Œæœªåˆå§‹åŒ–å˜é‡çš„åŒºåˆ«ã€‚

</aside>

åŒ…å« undefined å€¼çš„å˜é‡å’Œæœªå®šä¹‰å˜é‡æ˜¯æœ‰åŒºåˆ«çš„ï¼š

```tsx
let name;
// let age;

console.log(name); // undefined
console.log(age); // age is not defined
```

ä½† `typeof` æœªåˆå§‹åŒ–çš„å˜é‡æ—¶ï¼Œè¿”å›çš„ä¾ç„¶æ˜¯ `undefined`

## Null ç±»å‹

Null ç±»å‹åªæœ‰ä¸€ä¸ªç‰¹æ®Šå€¼ `null` ã€‚

ECMA-262 å°† `null` å’Œ `undefined` å®šä¹‰ä¸ºè¡¨é¢ä¸Šç›¸ç­‰ã€‚

ä»»ä½•æ—¶å€™ï¼Œåªè¦å˜é‡ä¿å­˜å¯¹è±¡ï¼Œè€Œå½“æ—¶åˆæ²¡æœ‰é‚£ä¸ªå¯¹è±¡å¯ä¿å­˜ï¼Œå°±è¦ç”¨ `null` æ¥å¡«å……è¯¥å˜é‡ã€‚

## Number ç±»å‹

åœ¨ä½¿ç”¨ `Number()` åœ¨è½¬æ¢å¯¹è±¡åˆ°æ•°å­—æ—¶ï¼Œä¼šè°ƒç”¨ `valueOf()` æ–¹æ³•ã€‚å¦‚æœè½¬æ¢ç»“æœæ˜¯ `NaN`ï¼Œåˆ™è°ƒç”¨ `toString()` æ–¹æ³•ï¼Œå†æŒ‰ç…§è½¬æ¢å­—ç¬¦ä¸²çš„è§„åˆ™è½¬æ¢ã€‚

```tsx
const something = {
  valueOf() {
    return 42;
  },
};

console.log(Number(something)); // 42
console.log(parseInt(something));  // NaN
console.log(+something);  // 42
```

<aside>
ğŸ’¡ ä¸€å…ƒåŠ æ“ä½œç¬¦ä¸ `Number()` å‡½æ•°éµå¾ªç›¸åŒçš„è½¬æ¢è§„åˆ™ã€‚

</aside>

## String ç±»å‹

ECMAScript ä¸­çš„å­—ç¬¦ä¸²éƒ½æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Œä¸€æ—¦åˆ›å»ºï¼Œå®ƒä»¬çš„å€¼å°±ä¸èƒ½å˜äº†ã€‚è¦ä¿®æ”¹æŸä¸ªå˜é‡ä¸­çš„å­—ç¬¦ä¸²ï¼Œå¿…é¡»å…ˆé”€æ¯åŸå§‹å­—ç¬¦ä¸²ï¼Œç„¶åå°†åŒ…å«æ–°å€¼çš„å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¿å­˜åˆ°è¯¥å˜é‡ã€‚

```tsx
let lang = 'Java';
lang = lang + 'Script';
console.log(lang)
```

æ•´ä¸ªè¿‡ç¨‹ä¼šå…ˆåˆ†é…ä¸€ä¸ªè¶³å¤Ÿå®¹çº³ 10 ä¸ªå­—ç¬¦çš„ç©ºé—´ï¼Œç„¶åå¡«å……ä¸Š â€œJavaâ€ å’Œ â€œScriptâ€ã€‚æœ€åé”€æ¯åŸå§‹å­—ç¬¦ä¸² â€œJavaâ€ å’Œ â€œScriptâ€ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æ²¡æœ‰ç”¨äº†ã€‚è¿™ä¹Ÿæ˜¯ä¸€äº›æ—©æœŸæµè§ˆå™¨åœ¨æ‹¼æ¥å­—ç¬¦ä¸²æ—¶éå¸¸æ…¢çš„åŸå› ã€‚

### æ¨¡æ¿å­—é¢é‡æ ‡ç­¾å‡½æ•°

æ¨¡æ¿å­—é¢é‡ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ JavaScript å¥æ³•è¡¨è¾¾å¼ï¼Œåªä¸è¿‡æ±‚å€¼åå¾—åˆ°çš„æ˜¯å­—ç¬¦ä¸²ã€‚

æ¨¡æ¿å­—é¢é‡ä¹Ÿæ”¯æŒå®šä¹‰æ ‡ç­¾å‡½æ•°ï¼ˆtag functionï¼‰ï¼Œè€Œé€šè¿‡æ ‡ç­¾å‡½æ•°å¯ä»¥è‡ªå®šä¹‰æ’å€¼è¡Œä¸ºã€‚æ ‡ç­¾å‡½æ•°ä¼šæ¥æ”¶è¢«æ’å€¼è®°å·åˆ†éš”åçš„æ¨¡æ¿å’Œå¯¹æ¯ä¸ªè¡¨è¾¾å¼çš„æ±‚å€¼ç»“æœã€‚

```tsx
function sampleTag(string, ...rest) {
  console.log(string);
  console.log(rest);
}

const name = 'xfy';
const age = 18;
console.log(sampleTag`Hello ${name}, my age is ${age}`);
```

å¯¹äºæœ‰ n ä¸ªæ’å€¼çš„æ¨¡æ¿å­—é¢é‡ï¼Œä¼ ç»™æ ‡ç­¾å‡½æ•°çš„è¡¨è¾¾å¼å‚æ•°çš„ä¸ªæ•°å§‹ç»ˆæ˜¯ nï¼Œè€Œä¼ ç»™æ ‡ç­¾å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ‰€åŒ…å«çš„å­—ç¬¦ä¸²ä¸ªæ•°å§‹ç»ˆæ˜¯ n+1ã€‚

```tsx
function zipTag(string, ...rest) {
  console.log(string);
  console.log(rest.map((e, i) => `${e}${string[i + 1]}`));
  return string[0] + rest.map((e, i) => `${e}${string[i + 1]}`).join('');
}
const a = 40;
const b = 2;
console.log(zipTag`${a} + ${b} = ${a + b}`);
```

## Symbol ç±»å‹

ç¬¦å·æ˜¯åŸå§‹å€¼ï¼Œä¸”ç¬¦å·å®ä¾‹æ˜¯å”¯ä¸€ã€ä¸å¯å˜çš„ã€‚

`Symbol()` å‡½æ•°ä¸èƒ½ä¸ `new` å…³é”®å­—ä¸€èµ·ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨ã€‚è¿™æ ·æ˜¯ä¸ºäº†é¿å…åˆ›å»ºç¬¦å·åŒ…è£…å¯¹è±¡ã€‚

å¦‚æœç¡®å®éœ€è¦ç¬¦å·åŒ…è£…å¯¹è±¡ï¼Œå¯ä»¥é…åˆ `Object()` ä¸€èµ·ä½¿ç”¨ï¼š

```tsx
Object(Symbol('xfy'));
```

### å…¨å±€ç¬¦å·æ³¨å†Œè¡¨

å¦‚æœéœ€è¦å…±äº«å’Œé‡ç”¨ç¬¦å·å®ä¾‹ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºé”®ï¼Œåœ¨å…¨å±€ç¬¦å·æ³¨å†Œè¡¨ä¸­åˆ›å»ºå¹¶é‡ç”¨æ­¤ç¬¦å·ã€‚

```tsx
const xfy = Symbol.for('xfy');
console.log(xfy);
console.log(Symbol.for('xfy'));
console.log(xfy === Symbol.for('xfy')); // true
```

`Symbol.for()` ä¼šè¿”å›å·²ç»å­˜åœ¨è¯¥å­—ç¬¦ä¸²å¯¹äºçš„ç¬¦å·`ã€‚

## å¸¸ç”¨å†…ç½®ç¬¦å·

ECMAScirpt6 ä¹Ÿå¼•å…¥äº†ä¸€æ‰¹å¸¸ç”¨å†…ç½®ç¬¦å·ï¼ˆwell-known symbolï¼‰ï¼Œç”¨äºæš´éœ²è¯­è¨€å†…éƒ¨è¡Œä¸ºï¼Œå¼€å‘è€…å¯ç›´æ¥æ–¹ä½ã€é‡å†™æˆ–æ¨¡æ‹Ÿè¿™äº›è¡Œä¸ºã€‚

<aside>
ğŸ’¡ ECMA è§„èŒƒä¼šç»å¸¸å¼•ç”¨ç¬¦å·åœ¨è§„èŒƒä¸­çš„åç§°ï¼Œå‰ç¼€ä¸º @@ã€‚æ¯”å¦‚ï¼Œ@@iterator æŒ‡å¾—å°±æ˜¯ `Symbol.iterator`

</aside>

### `Symbol.asyncIterator`

è¿™ä¸ªç¬¦å·è¡¨ç¤ºå®ç°å¼‚æ­¥è¿­ä»£å™¨ API çš„å‡½æ•°ã€‚

ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›å¯¹è±¡é»˜è®¤çš„ AsyncIteratorã€‚ç”± `for-await-of` è¯­å¥ä½¿ç”¨ã€‚

```tsx
class Foo {
  #start = 0;
  #end = 0;

  constructor(end) {
    this.#end = end;
  }

  async *[Symbol.asyncIterator]() {
    while (this.#start <= this.#end) {
      yield new Promise((resolve) => resolve(this.#start++));
    }
  }
}

const bar = new Foo(10);

for await (const i of bar) {
  console.log(i);
}
```

æŠ€æœ¯ä¸Šï¼Œè¿™ä¸ªç”± `Symbol.asyncIterator` å‡½æ•°ç”Ÿæˆçš„å¯¹è±¡åº”è¯¥é€šè¿‡å…¶ `next()` æ–¹æ³•é™†ç»­è¿”å› `Promise` å®ä¾‹ã€‚

### `Symbol.hasInstance`

ä¸€ä¸ªæ–¹æ³•ï¼Œ è¯¥æ–¹æ³•å†³å®šä¸€ä¸ªæ„é€ å™¨å¯¹è±¡æ˜¯å¦è®¤å¯ä¸€ä¸ªå¯¹è±¡æ—¶å®ƒçš„å®ä¾‹ã€‚ç”± `instanceof` æ“ä½œç¬¦ä½¿ç”¨ã€‚

```tsx
class Foo {}
const f = new Foo();
console.log(f instanceof Foo);
```

åœ¨ ES6 ä¸­ï¼Œ`instanceof` æ“ä½œç¬¦ä¼šä½¿ç”¨ `Symbol.hasInstance` å‡½æ•°æ¥ç¡®å®šå…³ç³»

```tsx
console.log(Foo[Symbol.hasInstance](f));
```

è¿™ä¸ªå±æ€§å®šä¹‰åœ¨ Function åŸå‹ä¸Šï¼Œå¯ä»¥é€šè¿‡é™æ€æ–¹æ³•é‡å†™è¿™ä¸ªå±æ€§ã€‚

```tsx
class Bar {}
class Baz extends Bar {
  static [Symbol.hasInstance]() {
    return false;
  }
}

const b = new Baz();

console.log(b instanceof Bar);
console.log(b instanceof Baz);
console.log(Baz[Symbol.hasInstance](b));
```

### `Symbol.isConcatSpreadable`

ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚æœæ˜¯ `true` ï¼Œåˆ™æ„å‘³ç€å¯¹è±¡åº”è¯¥ç”¨ `Array.prototype.concat()` æ‰“å¹³å…¶æ•°ç»„å…ƒç´ ã€‚

æ•°ç»„å¯¹è±¡é»˜è®¤æƒ…å†µä¸‹ä¼šè¢«æ‰“å¹³åˆ°å·²æœ‰çš„æ•°ç»„ã€‚ç±»æ•°ç»„å¯¹è±¡é»˜è®¤æƒ…å†µä¸‹ä¼šè¢«è¿½åŠ åˆ°æ•°ç»„æœ«å°¾ã€‚å…¶ä»–ä¸æ˜¯ç±»æ•°ç»„å¯¹å¯¹è±¡çš„å¯¹è±¡åœ¨ `Symbol.isConcatSpreadable` è¢«è®¾ç½®ä¸º `true` çš„æƒ…å†µä¸‹ä¼šè¢«å¿½ç•¥ã€‚

```tsx
const initial = ['foo'];
const bar = ['bar', ['hello', 'world']];

console.log(initial.concat(bar));

bar[Symbol.isConcatSpreadable] = false;
console.log(initial.concat(bar));
```

<aside>
ğŸ’¡ é»˜è®¤æƒ…å†µä¸‹åªä¼šæ‰“å¹³ä¸€çº§ã€‚

</aside>

### `Symbol.iterator`

ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›å¯¹è±¡é»˜è®¤çš„è¿­ä»£å™¨ã€‚ç”± `for-of` è¯­å¥ä½¿ç”¨ã€‚

```tsx
const xfy = {
  start: 0,
  end: 10,

  *[Symbol.iterator]() {
    while (this.start <= this.end) {
      yield this.start++;
    }
  },
};

for (const i of xfy) {
  console.log(i);
}
```

æŠ€æœ¯ä¸Šï¼Œè¿™ä¸ªç”± `Symbol.iterator` å‡½æ•°ç”Ÿæˆçš„å¯¹è±¡åº”è¯¥é€šè¿‡å…¶ `next()` æ–¹æ³•é™†ç»­è¿”å›å€¼ã€‚

### `Symbol.match`

ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨æ­£åˆ™è¡¨è¾¾å¼å»åŒ¹é…å­—ç¬¦ä¸²ã€‚ç”± `String.prototype.match()` æ–¹æ³•ä½¿ç”¨ã€‚

`String.prototype.match()` æ–¹æ³•ä¼šä½¿ç”¨ä»¥ `Symbol.match` **ä¸ºé”®çš„å‡½æ•°**æ¥å¯¹æ­£åˆ™è¡¨è¾¾å¼æ±‚å€¼ã€‚

```tsx
const xfy = {
  [Symbol.match](target) {
    return target.includes('xfy');
  },
};

console.log('foobar'.match(xfy));
console.log('foobarxfy'.match(xfy));
```

### `Symbol.replace`

ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ›¿æ¢ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­åŒ¹é…çš„å­ä¸²ã€‚ç”± `String.prototype.replace()` æ–¹æ³•ä½¿ç”¨ã€‚

`String.prototype.replace()` æ–¹æ³•ä¼šä½¿ç”¨ä»¥ `Symbol.replace` ä¸ºé”®çš„å‡½æ•°æ¥å¯¹æ­£åˆ™è¡¨è¾¾å¼æ±‚å€¼ã€‚

```tsx
class Replacer {
  static [Symbol.replace](target, replacement) {
    return target.split('foo').join(replacement);
  }
}

console.log('barfoobaz'.replace(Replacer, 'qux'));
```

```tsx
class Replacer {
  #str = '';

  constructor(str) {
    this.#str = str;
  }

  [Symbol.replace](target, replacement) {
    return target.split(this.#str).join(replacement);
  }
}

console.log('barfoobaz'.replace(new Replacer('foo'), 'qux'));
```

### `[Symbol.search](http://Symbol.search)`

ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›å­—ç¬¦ä¸²ä¸­åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ç´¢å¼•ã€‚ç”± `String.prototype.search()` æ–¹æ³•ä½¿ç”¨ã€‚

`String.prototype.search()` æ–¹æ³•ä¼šä½¿ç”¨ä»¥ `Symbol.search` ä¸ºé”®çš„å‡½æ•°æ¥å¯¹æ­£åˆ™è¡¨è¾¾å¼æ±‚å€¼ã€‚

```tsx
class Searcher {
  #str = '';

  constructor(str) {
    this.#str = str;
  }

  [Symbol.search](target) {
    return target.indexOf(this.#str);
  }
}

console.log('xfyfoobarqux'.search(new Searcher('bar')));
```

### `Symbol.species`

ä¸€ä¸ªå‡½æ•°å€¼ï¼Œè¯¥å‡½æ•°ä½œä¸ºåˆ›å»ºæ´¾ç”Ÿå¯¹è±¡çš„æ„é€ å‡½æ•°ã€‚

ç”¨ `Symbol.species` å®šä¹‰é™æ€çš„è·å–å™¨ï¼ˆgetterï¼‰æ–¹æ³•ï¼Œå¯ä»¥è¦†ç›–æ–°åˆ›å»ºå®ä¾‹çš„åŸå‹å®šä¹‰ã€‚

```tsx
class Bar extends Array {}
class Baz extends Array {
  static get [Symbol.species]() {
    return Array;
  }
}

let bar = new Bar();
console.log(bar instanceof Bar);
console.log(Bar[Symbol.hasInstance](bar));
bar = bar.concat('bar');
console.log(bar);
console.log(bar instanceof Bar);
console.log(Bar[Symbol.hasInstance](bar));

let baz = new Baz();
console.log(baz instanceof Baz);
console.log(Baz[Symbol.hasInstance](baz));
baz = baz.concat('baz');
console.log(baz);
console.log(baz instanceof Baz);
console.log(Baz[Symbol.hasInstance](baz));
console.log(baz instanceof Array);
```

### `Symbol.split`

ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åœ¨åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ç´¢å¼•ä½ç½®æ‹†åˆ†å­—ç¬¦ä¸²ã€‚ç”± `String.prototype.spolit()` æ–¹æ³•ä½¿ç”¨ã€‚

`String.prototype.spolit()` æ–¹æ³•ä¼šä½¿ç”¨ä»¥ `Symbol.spolit` ä¸ºé”®çš„å‡½æ•°æ¥å¯¹æ­£åˆ™è¡¨è¾¾å¼æ±‚å€¼ã€‚

### `Symbol.toPrimitive`

ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†å¯¹è±¡è½¬æ¢ä¸ºç›¸åº”çš„åŸå§‹å€¼ã€‚ç”± `ToPrimitive` æŠ½è±¡æ“ä½œä½¿ç”¨ã€‚

é€šè¿‡åœ¨ä¸€ä¸ªå®ä¾‹çš„ `Symbol.toPrimitive` å±æ€§ä¸Šå®šä¹‰ä¸€ä¸ªå‡½æ•°å¯ä»¥æ”¹å˜å®ä¾‹è½¬æ¢ä¸ºåŸå§‹å€¼çš„é»˜è®¤è¡Œä¸ºã€‚

```tsx
class Foo {}
const foo = new Foo();

console.log(3 + foo);
console.log(3 - foo);
console.log(String(foo));

class Bar {
  [Symbol.toPrimitive](target) {
    switch (target) {
      case 'number':
        return 40;
      case 'string':
        return 'xfy';
      case 'default':
      default:
        return 'default';
    }
  }
}

const bar = new Bar();

console.log(3 + bar);
console.log(82 - bar);
console.log(String(bar));
```

### `Symbol.toStringTag`

ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²ç”¨äºåˆ›å»ºå¯¹è±¡çš„é»˜è®¤å­—ç¬¦ä¸²æè¿°ã€‚ç”±å†…ç½®æ–¹æ³• `Object.prototype.toString()` ä½¿ç”¨ã€‚

```tsx
function getType(target) {
  return Object.prototype.toString.call(target);
}

const s = new Set();
console.log(s.toString());
console.log(getType(s));
console.log(Set.prototype[Symbol.toStringTag]);

class Foo {
  [Symbol.toStringTag] = '42';
}
const foo = new Foo();
console.log(getType(foo));

class MySet extends Set {
  get [Symbol.toStringTag]() {
    return 'MySet';
  }
}
const s2 = new MySet();
console.log(getType(s2));
s2.add('xfy');
console.log(s2);
```

### `Symbol.unscopables`

ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ‰€æœ‰çš„ä»¥åŠç»§æ‰¿çš„å±æ€§ï¼Œéƒ½ä¼šä»å…³è”å¯¹è±¡çš„ `with` ç¯å¢ƒç»‘å®šä¸­æ’é™¤ã€‚

```tsx
const o = {
  foo: 'bar',
};

with (o) {
  console.log(foo);
}

o[Symbol.unscopables] = {
  foo: true,
};

with (o) {
  console.log(foo);
}
```

<aside>
ğŸ’¡ ä¸æ¨èä½¿ç”¨ `with` ï¼Œå› æ­¤ä¹Ÿä¸æ¨èä½¿ç”¨ `Symbol.unscopables` ã€‚

</aside>

## Object ç±»å‹

ECMAScript ä¸­çš„å¯¹è±¡å…¶å®å°±æ˜¯ä¸€ç»„æ•°æ®å’ŒåŠŸèƒ½çš„é›†åˆã€‚

<aside>
ğŸ’¡  ä¸¥æ ¼æ¥è¯´ï¼ŒECMA-262 ä¸­å¯¹è±¡çš„è¡Œä¸ºä¸ä¸€å®šé€‚åˆ JavaScript ä¸­çš„å…¶ä»–å¯¹è±¡ã€‚

</aside>